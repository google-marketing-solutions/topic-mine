<mat-expansion-panel
  (opened)="panelOpenState.set(expand)"
  (closed)="panelOpenState.set(!expand)"
  [expanded]="expand"
  class="results-container"
>
  <mat-expansion-panel-header>
    <mat-panel-title> AI Generated Results </mat-panel-title>
    <mat-panel-description>
      Here you can see the results generated by Gemini&nbsp;
      <mat-icon>insights</mat-icon>
    </mat-panel-description>
  </mat-expansion-panel-header>
  @for (association of associations; track association) {
  <mat-card appearance="outlined">
    <mat-card-header>
      <mat-card-title> Brand: {{ association.brand }} </mat-card-title>
      <mat-card-subtitle>Product: {{ association.term }} </mat-card-subtitle>
      <mat-card-subtitle>Trend: {{ association.trend }} </mat-card-subtitle>
    </mat-card-header>

    <mat-expansion-panel class="headlines-container">
      <mat-expansion-panel-header>
        <mat-panel-title> Headlines </mat-panel-title>
        <mat-panel-description>
          Expand to see the generated Headlines
        </mat-panel-description>
      </mat-expansion-panel-header>
      @for (headline of association.headlines; track headline; let i = $index) {
      <p>Headline {{ i + 1 }} - {{ headline }}</p>
      }
      <mat-card-actions>
        <button mat-button>Edit</button>
      </mat-card-actions>
    </mat-expansion-panel>
    <mat-expansion-panel class="descriptions-container">
      <mat-expansion-panel-header>
        <mat-panel-title> Descriptions </mat-panel-title>
        <mat-panel-description>
          Expand to see the generated Descriptions
        </mat-panel-description>
      </mat-expansion-panel-header>
      @for (description of association.descriptions; track description; let i =
      $index) {
      <p>Description {{ i + 1 }} - {{ description }}</p>
      }
      <mat-card-actions>
        <button mat-button>Edit</button>
      </mat-card-actions>
    </mat-expansion-panel>
  </mat-card>
  } @if (associations && associations.length > 0) {
  <div class="buttons-container">
    <button mat-flat-button (click)="exportToSA360Template()">
      Export to SA360
    </button>
    <button mat-flat-button (click)="exportToDV360Template()">
      Export to DV360
    </button>
  </div>
  }
</mat-expansion-panel>
